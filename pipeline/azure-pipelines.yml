# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

variables:
  - name: subscription
    value: 'Visual Studio Enterprise' 
  - name: resourceGroupName
    value: my-personal-website 
    
pool:
  vmImage: 'ubuntu-latest'

stages:
- stage: Build
  displayName: Build stage

  jobs:
    - job : build 
      steps:
      - task: CopyFiles@2
        inputs:
          contents: 'src/**'
          targetFolder: $(Build.ArtifactStagingDirectory)

      - task: PublishBuildArtifacts@1
        displayName: Publish build artifact
        inputs:
          artifactName: drop

    
    - job : Deploy 
      steps:
      - task: DownloadBuildArtifacts@0
                 
      - task: AzureResourceGroupDeployment@2
        inputs:
          azureSubscription: $(subscription)
          resourceGroupName: $(resourceGroupName)
          location: 'West Europe'
